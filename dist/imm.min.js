!function(r,n){if("function"==typeof define&&define.amd)define(["Immutable"],function(t){return r.imm=n(t)});else if("object"==typeof exports){var t=require("seamless-immutable");module.exports=n(t)}else r.imm=n(r.Immutable)}(this,function(r){function n(n,t){if(!o(n))throw new Error("You must provide an array");var e=r(n);return u(t,e)}function t(r){return o(r)?r:[r]}function e(r,n){for(var t=0;t<r.length;t++)if(r[t]===n)return!0;return!1}function u(n,i){function f(n){if(!r.isImmutable(n))throw new Error("Not an immutable array")}function a(r){return u(n,r)}function c(){return i}function l(r,n){return r.merge(n)}function s(r){return h(r[n])}function h(r){if(!r)return-1;for(var t,e=0;e<i.length;e++)if(t=i[e],t[n]===r)return e;return-1}function m(r){var n=h(r);return n>-1?i[n]:void 0}function v(r){return o(r)?p(r):d(r)}function d(r){var n,t=s(r);if(-1!=t)throw new Error("Record already exists");return n=i.concat([r]),a(n)}function p(n){for(var t=i.asMutable(),e=0;e<n.length;e++){var u=n[e];t.push(u)}return t=r(t),a(t)}function g(e){for(var u=t(e),o=[],f=0,c=0;c<i.length;c++){var l=i[c];l[n]===e[n]?(f++,o.push(e)):o.push(l)}if(f!=u.length)throw new Error("Record does not exists");return o=r(o),a(o)}function w(t){if(!t[n])throw new Error("Record must have an id");for(var e=[],u=0;u<i.length;u++){var o=i[u];if(t[n]===o[n]){var f=l(o,t);e.push(f)}else e.push(o)}return e=r(e),a(e)}function b(u){for(var o=t(u),f=[],c=[],l=0;l<i.length;l++){var s=i[l];e(o,s[n])?c.push(s):f.push(s)}if(c.length!==o.length)throw new Error("Not all records found");return f=r(f),a(f)}function y(r){var n=i.map(r);return a(n)}function E(r){var n=i.filter(r);return a(n)}function I(n){var t=i.asMutable(),t=t.sort(n);return t=r(t),a(t)}function x(r){for(var n=0;n<i.length;n++){var t=i[n];if(r(t))return t}return void 0}function A(){return i.length}return f(i),n=n||"id",{isImm:!0,add:v,all:c,count:A,filter:E,find:x,get:m,replace:g,map:y,remove:b,update:w,sort:I}}if(null==r)throw new Error("Immutable is null");var o=Array.isArray||function(r){return"[object Array]"===toString.call(r)};return n});
!function(r,n){if("function"==typeof define&&define.amd)define(["Immutable"],function(t){return r.imm=n(t)});else if("object"==typeof exports){var t=require("seamless-immutable");module.exports=n(t)}else r.imm=n(r.Immutable)}(this,function(r){function n(r){return o(r)?r:[r]}function t(r,n){for(var t=0;t<r.length;t++)if(r[t]===n)return!0;return!1}function e(n,t){if(!o(n))throw new Error("You must provide an array");var e=r(n);return u(t,e)}function u(e,i){function f(n){if(!r.isImmutable(n))throw new Error("Not an immutable array")}function a(r){return u(e,r)}function c(r,n){return r.merge(n)}function l(r){return s(r[e])}function s(r){if(!r)return-1;for(var n,t=0;t<i.length;t++)if(n=i[t],n[e]===r)return t;return-1}function h(){return i}function m(r){var n=s(r);return n>-1?i[n]:void 0}function v(r){return o(r)?p(r):d(r)}function d(r){var n,t=l(r);if(-1!=t)throw new Error("Record already exists");return n=i.concat([r]),a(n)}function p(n){for(var t=i.asMutable(),e=0;e<n.length;e++){var u=n[e];t.push(u)}return t=r(t),a(t)}function g(t){for(var u=n(t),o=[],f=0,c=0;c<i.length;c++){var l=i[c];l[e]===t[e]?(f++,o.push(t)):o.push(l)}if(f!=u.length)throw new Error("Record does not exists");return o=r(o),a(o)}function w(n){if(!n[e])throw new Error("Record must have an id");for(var t=[],u=0;u<i.length;u++){var o=i[u];if(n[e]===o[e]){var f=c(o,n);t.push(f)}else t.push(o)}return t=r(t),a(t)}function b(u){for(var o=n(u),f=[],c=[],l=0;l<i.length;l++){var s=i[l];t(o,s[e])?c.push(s):f.push(s)}if(c.length!==o.length)throw new Error("Not all records found");return f=r(f),a(f)}function y(r){var n=i.map(r);return a(n)}function E(r){var n=i.filter(r);return a(n)}function I(n){var t=i.asMutable(),t=t.sort(n);return t=r(t),a(t)}function x(r){for(var n=0;n<i.length;n++){var t=i[n];if(r(t))return t}return void 0}function A(){return i.length}return f(i),e=e||"id",{isImm:!0,add:v,all:h,count:A,filter:E,find:x,get:m,replace:g,map:y,remove:b,update:w,sort:I}}if(null==r)throw new Error("Immutable is null");var o=Array.isArray||function(r){return"[object Array]"===toString.call(r)};return e});